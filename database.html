---
layout: default
---

<main id="search-hits">
  <div id="firebaseui-auth-container"></div>
  <div id="loader">Loading...</div>

  <form style="display:flex;flex-direction:column;" action="">
    <label for="url">Ссылка</label>
    <input id="url" class="url" type="text" required>
    <label for="description">Описание</label>
    <input id="description" class="title" type="text" required>
    <button style="margin-top:15px;">Submit</button>
  </form>

  <p>Вывод данных:</p>
  <ul class="data-container"></ul>
</main>

<script src="https://www.gstatic.com/firebasejs/5.2.0/firebase.js">
  < script src = "https://www.gstatic.com/firebasejs/5.2.0/firebase-auth.js" >
</script>
<script src="https://cdn.firebase.com/libs/firebaseui/2.5.1/firebaseui.js"></script>
<link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/2.5.1/firebaseui.css" />
</script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyDtjmXX8RViBFFeT3GgBO1rL86AeMfAsYo",
    authDomain: "mouseover-design.firebaseapp.com",
    databaseURL: "https://mouseover-design.firebaseio.com",
    projectId: "mouseover-design",
    storageBucket: "",
    messagingSenderId: "435474680440"
  };
  firebase.initializeApp(config);
</script>
<script>
  // Get a reference to the database service
  var database = firebase.database();

  var inputUrl = document.querySelector('.url');
  var inputTitle = document.querySelector('.title');
  var submit = document.querySelector('button');
  var container = document.querySelector('.data-container');

  function sendDataToFirebase(inputUrl, inputTitle) {
    // database().ref() takes you to the root node of your database
    // and set() writes a value in JSON format.
    firebase.database().ref('accessibility/').push({
      url: inputUrl,
      title: inputTitle
    });
  }

  var dataRef = firebase.database().ref('accessibility/');
  dataRef.on('child_added', function(snapshot) {
    res = snapshot.val();
    console.log(snapshot.val());
    document.querySelector('.data-container').innerHTML += `<li class="data"><a href="${res.url}">${res.title}</a></li>`;
  });

  submit.addEventListener('click', function(e) {
    if (inputUrl.value !== '' && inputTitle.value !== '') {
      sendDataToFirebase(inputUrl.value, inputTitle.value);
      inputUrl.value = '';
      inputTitle.value = '';
    } else {
      console.log('Заполните поля')
    }
  });
  var ui = new firebaseui.auth.AuthUI(firebase.auth());
  ui.start('#firebaseui-auth-container', {
    signInOptions: [
      // List of OAuth providers supported.
      firebase.auth.GoogleAuthProvider.RPOVIDER_ID,
    ],
    // Other config options...
  });

  var uiConfig = {
    callbacks: {
      signInSuccessWithAuthResult: function(authResult, redirectUrl) {
        // User successfully signed in.
        // Return type determines whether we continue the redirect automatically
        // or whether we leave that to developer to handle.
        return true;
      },
      uiShown: function() {
        // The widget is rendered.
        // Hide the loader.
        document.getElementById('loader').style.display = 'none';
      }
    },
    // Will use popup for IDP Providers sign-in flow instead of the default, redirect.
    signInFlow: 'popup',
    signInSuccessUrl: '/database.html',
    signInOptions: [
      // Leave the lines as is for the providers you want to offer your users.
      firebase.auth.GoogleAuthProvider.PROVIDER_ID,
    ],
    // Terms of service url.
    tosUrl: '<your-tos-url>'
  };

  ui.start('#firebaseui-auth-container', uiConfig);
</script>
<!-- firebase.auth().signOut(); -->
